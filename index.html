<!DOCTYPE html>
<html lang="pt-BR" class="">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Extrator e Editor PRO</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
Â  Â  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/zxing.min.js"></script>
Â  Â  <style>
Â  Â  Â  Â  .progress-fill { transition: width 0.3s ease-in-out; }
Â  Â  Â  Â  .rotation-modal { backdrop-filter: blur(5px); }
Â  Â  Â  Â  .rotation-slider { -webkit-appearance: none; width: 100%; height: 8px; border-radius: 5px; background: #e2e8f0; outline: none; margin-bottom: 15px; }
Â  Â  Â  Â  .dark .rotation-slider { background: #4a5568; }
Â  Â  Â  Â  .rotation-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(45deg, #667eea, #764ba2); cursor: pointer; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; }
Â  Â  Â  Â  .rotation-slider::-webkit-slider-thumb:hover { transform: scale(1.2); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5); }

Â  Â  Â  Â  .rotation-slider::-moz-range-thumb { width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(45deg, #667eea, #764ba2); cursor: pointer; border: none; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3); }

Â  Â  </style>

</head>

<body class="bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200 font-sans flex items-center justify-center min-h-screen p-4">



Â  Â  <div class="container bg-white dark:bg-slate-800 p-6 rounded-xl shadow-2xl w-full max-w-3xl relative">

Â  Â  Â  Â  <button id="themeToggle" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 flex items-center justify-center transition-transform hover:scale-110" aria-label="Alternar tema">ğŸŒ™</button>



Â  Â  Â  Â  <header class="text-center mb-6 flex items-center justify-center gap-4">

Â  Â  Â  Â  Â  Â  <img src="https://raw.githubusercontent.com/Halexandre1/PDF_PRO/main/HERBERT.jpg" alt="LogÃ³tipo" class="w-12 h-12 rounded-full object-cover">

Â  Â  Â  Â  Â  Â  <div>

Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-indigo-600 dark:text-indigo-400">ğŸ”„ Extrator e Editor PRO</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-slate-500 dark:text-slate-400 mt-1">Cole, rotacione e extraia nÃºmeros de qualquer imagem.</p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </header>



Â  Â  Â  Â  <div id="pasteArea" class="border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all">

Â  Â  Â  Â  Â  Â  <i class="fas fa-paste text-4xl text-slate-400 dark:text-slate-500 mb-3"></i>

Â  Â  Â  Â  Â  Â  <p class="font-semibold">Clique aqui e cole (Ctrl+V) ou arraste uma imagem</p>

Â  Â  Â  Â  Â  Â  <span class="text-sm text-slate-500 dark:text-slate-400">ou</span>

Â  Â  Â  Â  Â  Â  <label for="fileInput" class="mt-2 inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg cursor-pointer transition-colors">

Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-upload mr-2"></i> Selecionar Ficheiro

Â  Â  Â  Â  Â  Â  </label>

Â  Â  Â  Â  Â  Â  <input type="file" id="fileInput" class="hidden" accept="image/*" multiple>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="status" class="text-center p-3 my-4 rounded-lg text-sm font-semibold hidden"></div>

Â  Â  Â  Â  <div id="progressBar" class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 my-4 hidden">

Â  Â  Â  Â  Â  Â  <div id="progressFill" class="bg-indigo-600 h-2.5 rounded-full progress-fill" style="width: 0%"></div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <canvas id="preview" class="max-w-full max-h-96 mx-auto my-4 rounded-lg shadow-md hidden"></canvas>



Â  Â  Â  Â  <div class="mt-6">

Â  Â  Â  Â  Â  Â  <label for="output" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">ğŸ“Š NÃºmeros extraÃ­dos:</label>

Â  Â  Â  Â  Â  Â  <textarea id="output" class="w-full h-40 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-md font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="Os nÃºmeros extraÃ­dos aparecerÃ£o aqui..."></textarea>

Â  Â  Â  Â  Â  Â  <div id="charCounter" class="text-right text-xs text-slate-500 dark:text-slate-400 mt-1 pr-1 font-semibold">DÃ­gitos: 0 | Linhas: 0</div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="flex flex-wrap justify-center gap-3 mt-4">

Â  Â  Â  Â  Â  Â  <button id="cleanJoinBtn" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-slate-300 dark:disabled:bg-slate-600 disabled:cursor-not-allowed" disabled><i class="fas fa-broom mr-2"></i>Limpar e Unir</button>

Â  Â  Â  Â  Â  Â  <button id="copyBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-blue-300 dark:disabled:bg-blue-800 disabled:cursor-not-allowed" disabled><i class="fas fa-copy mr-2"></i>Copiar</button>

Â  Â  Â  Â  Â  Â  <button id="clearBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-trash-alt mr-2"></i>Limpar Tudo</button>

Â  Â  Â  Â  </div>

Â  Â  Â  Â Â 

Â  Â  Â  Â  <div class="mt-8 pt-6 border-t border-slate-200 dark:border-slate-700 text-center">

Â  Â  Â  Â  Â  Â  Â <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3">ğŸ”— Links Ãšteis de Consulta</h3>

Â  Â  Â  Â  Â  Â  Â <div class="flex flex-wrap justify-center gap-3">

Â  Â  Â  Â  Â  Â  Â  Â <a href="https://solucoes.receita.fazenda.gov.br/Servicos/cnpjreva/Cnpjreva_Solicitacao.asp" data-pattern="\d{14}" data-name="CNPJ" data-digits="14" class="link-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors no-underline">CNPJ</a>

Â  Â  Â  Â  Â  Â  Â  Â <a href="https://www8.receita.fazenda.gov.br/SimplesNacional/Aplicacoes/ATB/ConsultaOptantes.app/ConsultarOpcao.aspx" data-pattern="\d{14}" data-name="CNPJ" data-digits="14" class="link-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors no-underline">Simples Nacional</a>

Â  Â  Â  Â  Â  Â  Â  Â <a href="https://www.nfe.fazenda.gov.br/portal/consultaRecaptcha.aspx" data-pattern="\d{44}" data-name="NFe" data-digits="44" class="link-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors no-underline">Nota Fiscal (NFe)</a>

Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="mt-8">

Â  Â  Â  Â  Â  Â  Â <h3 class="text-lg font-semibold text-center text-slate-700 dark:text-slate-300 mb-3">ğŸ“œ HistÃ³rico (Ãºltimas 5)</h3>

Â  Â  Â  Â  Â  Â  Â <div id="historyContainer" class="space-y-2"></div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <footer class="mt-8 pt-4 border-t border-slate-200 dark:border-slate-700 text-center text-sm text-slate-500 dark:text-slate-400" id="signature"></footer>

Â  Â  </div>



Â  Â  <div id="rotationModal" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden rotation-modal">

Â  Â  Â  Â  <div class="bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 relative">

Â  Â  Â  Â  Â  Â  <button id="closeModalBtn" class="absolute top-3 right-3 w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 flex items-center justify-center transition-transform hover:scale-110" aria-label="Fechar">&times;</button>

Â  Â  Â  Â  Â  Â  <h3 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 text-center mb-4">Ajustar RotaÃ§Ã£o da Imagem</h3>

Â  Â  Â  Â  Â  Â  <div class="image-container mx-auto bg-slate-200 dark:bg-slate-900/50">

Â  Â  Â  Â  Â  Â  Â  Â  <img id="rotatableImage" class="max-w-full max-h-[50vh] transition-transform duration-200 ease-in-out rounded-md" alt="Imagem para rotacionar">

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="controls mt-4 max-w-lg mx-auto">

Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="control-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold text-slate-700 dark:text-slate-300 mb-2">Ã‚ngulo: <span id="angleDisplay" class="text-indigo-600 dark:text-indigo-400 font-bold">0Â°</span></label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="range" id="rotationSlider" class="rotation-slider" min="-180" max="180" value="0" step="0.1">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="quick-controls flex justify-center gap-2 mb-4">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="-10">-10Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="-1">-1Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="-0.1">-0.1Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="0.1">+0.1Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="1">+1Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="quick-btn bg-slate-200 dark:bg-slate-700 hover:bg-indigo-500 hover:text-white dark:hover:bg-indigo-500 p-2 rounded-md text-xs font-semibold" data-angle="10">+10Â°</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-center gap-4">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="cancelRotationBtn" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-5 rounded-lg"><i class="fas fa-times mr-2"></i>Cancelar</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="resetRotationBtn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-5 rounded-lg"><i class="fas fa-sync-alt mr-2"></i>Resetar</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="confirmRotationBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-5 rounded-lg"><i class="fas fa-check mr-2"></i>Confirmar e Extrair</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const RotationState = { currentRotation: 0, originalImageData: null };

Â  Â  Â  Â  Â  Â  const ExtractorState = { queue: [], isProcessing: false };



Â  Â  Â  Â  Â  Â  const DOM = {

Â  Â  Â  Â  Â  Â  Â  Â  output: document.getElementById('output'),

Â  Â  Â  Â  Â  Â  Â  Â  preview: document.getElementById('preview'),

Â  Â  Â  Â  Â  Â  Â  Â  pasteArea: document.getElementById('pasteArea'),

Â  Â  Â  Â  Â  Â  Â  Â  fileInput: document.getElementById('fileInput'),

Â  Â  Â  Â  Â  Â  Â  Â  progressBar: document.getElementById('progressBar'),

Â  Â  Â  Â  Â  Â  Â  Â  progressFill: document.getElementById('progressFill'),

Â  Â  Â  Â  Â  Â  Â  Â  status: document.getElementById('status'),

Â  Â  Â  Â  Â  Â  Â  Â  copyBtn: document.getElementById('copyBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  cleanJoinBtn: document.getElementById('cleanJoinBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  clearBtn: document.getElementById('clearBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  historyContainer: document.getElementById('historyContainer'),

Â  Â  Â  Â  Â  Â  Â  Â  charCounter: document.getElementById('charCounter'),

Â  Â  Â  Â  Â  Â  Â  Â  signature: document.getElementById('signature'),

Â  Â  Â  Â  Â  Â  Â  Â  themeToggle: document.getElementById('themeToggle'),

Â  Â  Â  Â  Â  Â  Â  Â  body: document.body,

Â  Â  Â  Â  Â  Â  Â  Â  linkButtons: document.querySelectorAll('.link-button'),

Â  Â  Â  Â  Â  Â  Â  Â  rotationModal: document.getElementById('rotationModal'),

Â  Â  Â  Â  Â  Â  Â  Â  rotatableImage: document.getElementById('rotatableImage'),

Â  Â  Â  Â  Â  Â  Â  Â  rotationSlider: document.getElementById('rotationSlider'),

Â  Â  Â  Â  Â  Â  Â  Â  angleDisplay: document.getElementById('angleDisplay'),

Â  Â  Â  Â  Â  Â  Â  Â  quickBtns: document.querySelectorAll('.quick-btn'),

Â  Â  Â  Â  Â  Â  Â  Â  resetRotationBtn: document.getElementById('resetRotationBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  confirmRotationBtn: document.getElementById('confirmRotationBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  closeModalBtn: document.getElementById('closeModalBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  cancelRotationBtn: document.getElementById('cancelRotationBtn'),

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  const UI = {

Â  Â  Â  Â  Â  Â  Â  Â  showStatus(message, type = 'processing') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const styles = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  processing: 'bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success: 'bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  error: 'bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.status.textContent = message;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.status.className = `text-center p-3 my-4 rounded-lg text-sm font-semibold ${styles[type]}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.status.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  hideStatus() { DOM.status.classList.add('hidden'); },

Â  Â  Â  Â  Â  Â  Â  Â  updateProgress(percentage) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.progressFill.style.width = `${percentage}%`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.progressBar.style.display = percentage > 0 && percentage < 100 ? 'block' : 'none';

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  updateCharCounter() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const text = DOM.output.value;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const digitCount = (text.match(/\d/g) || []).length;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const lineCount = text.split('\n').filter(line => line.trim() !== '').length;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.charCounter.textContent = `DÃ­gitos: ${digitCount} | Linhas: ${lineCount}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isValid = digitCount === 14 || digitCount === 44;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.charCounter.classList.toggle('text-green-600', isValid);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.charCounter.classList.toggle('dark:text-green-400', isValid);

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  renderHistory(history) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.historyContainer.innerHTML = '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (history.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.historyContainer.innerHTML = '<p class="text-center text-sm text-slate-500">Nenhum histÃ³rico encontrado.</p>';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  history.forEach(item => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const div = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.className = 'bg-slate-100 dark:bg-slate-700 p-3 rounded-lg cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.innerHTML = `<div class="text-xs font-bold text-slate-500 dark:text-slate-400">${item.date}</div><div class="font-mono text-sm truncate">${item.content.replace(/\n/g, ' | ')}</div>`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.onclick = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.value = item.content;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.updateCharCounter();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.copyBtn.disabled = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.cleanJoinBtn.disabled = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.historyContainer.appendChild(div);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  clearAll() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.value = '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(DOM.preview.getContext('2d')) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.preview.getContext('2d').clearRect(0, 0, DOM.preview.width, DOM.preview.height);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.preview.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.hideStatus();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.updateProgress(0);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.copyBtn.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.cleanJoinBtn.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.updateCharCounter();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  const Clipboard = {

Â  Â  Â  Â  Â  Â  Â  Â  async copy(text) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await navigator.clipboard.writeText(text);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tempTextarea = document.createElement('textarea');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tempTextarea.value = text;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(tempTextarea);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tempTextarea.select();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(tempTextarea);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const History = {

Â  Â  Â  Â  Â  Â  Â  Â  save(text) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!text.trim()) return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let history = this.get();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  history.unshift({ date: new Date().toLocaleString('pt-BR'), content: text });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  history = history.slice(0, 5);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('ocrHistory', JSON.stringify(history));

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  get() { return JSON.parse(localStorage.getItem('ocrHistory') || '[]'); }

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  const Rotator = {

Â  Â  Â  Â  Â  Â  Â  Â  show(file) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!file || !file.type.startsWith('image/')) return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const reader = new FileReader();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reader.onload = (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  RotationState.originalImageData = e.target.result;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotatableImage.src = RotationState.originalImageData;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.reset();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotationModal.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  hide() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotationModal.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  update() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotatableImage.style.transform = `rotate(${RotationState.currentRotation}deg)`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.angleDisplay.textContent = `${RotationState.currentRotation.toFixed(1)}Â°`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotationSlider.value = RotationState.currentRotation;

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  adjust(angle) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  RotationState.currentRotation += angle;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  RotationState.currentRotation = Math.max(-180, Math.min(180, RotationState.currentRotation));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.update();

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  reset() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  RotationState.currentRotation = 0;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.update();

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  getRotatedImageBlob() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const canvas = document.createElement('canvas');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const img = new Image();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.onload = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const radians = (RotationState.currentRotation * Math.PI) / 180;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const sin = Math.abs(Math.sin(radians));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const cos = Math.abs(Math.cos(radians));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = img.width * cos + img.height * sin;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = img.width * sin + img.height * cos;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(canvas.width / 2, canvas.height / 2);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.rotate(radians);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.drawImage(img, -img.width / 2, -img.height / 2);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.toBlob((blob) => resolve(blob), 'image/png');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.src = RotationState.originalImageData;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const Extractor = {

Â  Â  Â  Â  Â  Â  Â  Â  Â addToQueue(files) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ExtractorState.queue.push(...files);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!ExtractorState.isProcessing) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.clearAll();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.processQueue();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  async processQueue() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ExtractorState.queue.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ExtractorState.isProcessing = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (DOM.output.value.trim()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  History.save(DOM.output.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.renderHistory(History.get());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ExtractorState.isProcessing = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const file = ExtractorState.queue.shift();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus(`A processar ${file.name || 'imagem'}...`, 'processing');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const imageURL = URL.createObjectURL(file);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const preprocessedImage = await this.preprocessImage(imageURL);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let barcodeFound = false, ocrFound = false;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus('ğŸ” A procurar cÃ³digo de barras...', 'processing');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.updateProgress(25);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const codeReader = new ZXing.BrowserMultiFormatReader();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await codeReader.decodeFromImageUrl(preprocessedImage);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result?.getText()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.value += (DOM.output.value ? '\n' : '') + result.getText();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  barcodeFound = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) { /* Ignorar */ }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus('ğŸ” A reconhecer texto (OCR)...', 'processing');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const worker = await Tesseract.createWorker({ logger: m => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (m.status === 'recognizing text') UI.updateProgress(50 + Math.round(m.progress * 50));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }});

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await worker.loadLanguage('por');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await worker.initialize('por');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await worker.setParameters({ tessedit_char_whitelist: '0123456789' });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const { data } = await worker.recognize(preprocessedImage);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await worker.terminate();



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const numeros = data.text.match(/\d+/g);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (numeros?.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const numerosLimpos = [...new Set(numeros)];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.value += (DOM.output.value ? '\n' : '') + numerosLimpos.join('\n');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ocrFound = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.updateCharCounter();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (barcodeFound || ocrFound) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus(`âœ… Dados extraÃ­dos com sucesso!`, 'success');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.copyBtn.disabled = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.cleanJoinBtn.disabled = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus('âš ï¸ Nenhum dado reconhecido na imagem.', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Erro no processamento:', error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus(`âŒ Erro ao processar.`, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } finally {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  URL.revokeObjectURL(imageURL);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.updateProgress(100);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.processQueue();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  preprocessImage(imageSource) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const img = new Image();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.crossOrigin = "Anonymous";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.onload = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const canvas = DOM.preview;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = img.width;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = img.height;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.filter = 'grayscale(1) contrast(1.5)';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.drawImage(img, 0, 0);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(canvas.toDataURL('image/png'));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.onerror = () => resolve(null);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.src = imageSource;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const App = {

Â  Â  Â  Â  Â  Â  Â  Â  init() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.setupEventListeners();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.loadTheme();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.setSignature();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.renderHistory(History.get());

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  setupEventListeners() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const handleImageFiles = (files) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const imageFiles = Array.from(files).filter(f => f.type.startsWith('image/'));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (imageFiles.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Rotator.show(imageFiles[0]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('paste', e => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const items = e.clipboardData?.items;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!items || DOM.rotationModal.classList.contains('hidden') === false) return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const imageFile = [...items].map(i => i.getAsFile()).find(f => f?.type.startsWith('image/'));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (imageFile) Rotator.show(imageFile);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('keydown', e => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.key === 'Escape' && !DOM.rotationModal.classList.contains('hidden')) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Rotator.hide();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (DOM.rotationModal.classList.contains('hidden')) return;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const keyMap = { ArrowLeft: e.shiftKey ? -10 : -1, ArrowRight: e.shiftKey ? 10 : 1 };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (keyMap[e.key]) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Rotator.adjust(keyMap[e.key]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (e.key.toLowerCase() === 'r') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Rotator.reset();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.pasteArea.addEventListener('click', () => DOM.fileInput.click());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.pasteArea.addEventListener('dragover', e => e.preventDefault());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.pasteArea.addEventListener('drop', e => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.dataTransfer.files) handleImageFiles(e.dataTransfer.files);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.fileInput.addEventListener('change', e => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.files.length > 0) handleImageFiles(e.target.files);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.cleanJoinBtn.addEventListener('click', () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (DOM.output.value.trim()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.value = DOM.output.value.replace(/\D/g, '');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.updateCharCounter();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const btn = DOM.cleanJoinBtn;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = '<i class="fas fa-check mr-2"></i>Limpo!';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => { btn.innerHTML = '<i class="fas fa-broom mr-2"></i>Limpar e Unir'; }, 1500);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.copyBtn.addEventListener('click', async () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!DOM.output.value.trim()) return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await Clipboard.copy(DOM.output.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.copyBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Copiado!';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => { DOM.copyBtn.innerHTML = '<i class="fas fa-copy mr-2"></i>Copiar'; }, 2000);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.clearBtn.addEventListener('click', () => UI.clearAll());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.themeToggle.addEventListener('click', () => this.toggleTheme());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.output.addEventListener('input', () => UI.updateCharCounter());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Eventos do Modal

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.rotationSlider.addEventListener('input', () => Rotator.adjust(parseFloat(DOM.rotationSlider.value) - RotationState.currentRotation));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.resetRotationBtn.addEventListener('click', () => Rotator.reset());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.closeModalBtn.addEventListener('click', () => Rotator.hide());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.cancelRotationBtn.addEventListener('click', () => Rotator.hide());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.quickBtns.forEach(btn => btn.addEventListener('click', e => Rotator.adjust(parseFloat(e.currentTarget.dataset.angle))));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.confirmRotationBtn.addEventListener('click', async () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Rotator.hide();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rotatedBlob = await Rotator.getRotatedImageBlob();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rotatedFile = new File([rotatedBlob], "imagem_rotacionada.png", { type: 'image/png' });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Extractor.addToQueue([rotatedFile]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.linkButtons.forEach(button => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.addEventListener('click', async (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const { pattern, name, digits } = e.target.dataset;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const allDigits = DOM.output.value.replace(/\D/g, '');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const match = allDigits.match(new RegExp(pattern));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (match) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.open(e.target.href, '_blank');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await Clipboard.copy(match[0]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus(`âœ… ${name} ${match[0]} copiado! Cole no site que abriu.`, 'success');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  UI.showStatus(`âš ï¸ Nenhum ${name} vÃ¡lido (${digits} dÃ­gitos) encontrado.`, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  toggleTheme() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isDark = DOM.body.parentElement.classList.toggle('dark');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('theme', isDark ? 'dark' : 'light');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  loadTheme() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const savedTheme = localStorage.getItem('theme');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.body.parentElement.classList.add('dark');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.themeToggle.textContent = 'â˜€ï¸';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.themeToggle.textContent = 'ğŸŒ™';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  setSignature() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DOM.signature.innerHTML = `<p>Feito por HAlexandre Â© ${new Date().getFullYear()}</p>`;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  App.init();

Â  Â  Â  Â  });

Â  Â  </script>

</body>

</html>
